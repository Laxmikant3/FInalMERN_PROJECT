{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\FinalMernProject-SHOPLY-main\\\\FinalMernProject-SHOPLY-main\\\\react\\\\src\\\\shopping\\\\products.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../auth/auth_helpers\";\nimport { apiHooks } from \"../apis/hooks\";\nimport { apiOperations } from \"../apis/operations\";\nimport ProductItem from \"./product-item\";\nimport { Row } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Products() {\n  _s();\n  let [cart, setCart] = useState([]);\n  let [sum, setSum] = useState(0);\n  let [ordered, setOrdered] = useState(false);\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n  const [dirty, setDirty] = useState(new Date());\n  const {\n    response,\n    error,\n    loading\n  } = apiHooks.useAxiosGet('/products', {\n    headers: {\n      accept: '*/*'\n    }\n  }, dirty);\n  console.log(error);\n  const addToCart = (id, count) => {\n    const newCart = [...cart.filter(c => c._id !== id), {\n      ...response.filter(p => p._id === id)[0],\n      qty: count\n    }];\n    setCart(newCart);\n    let total = 0;\n    newCart.map(c => total += c.price * c.qty);\n    setSum(total);\n  };\n  const doOrder = async () => {\n    const payload = cart.map(c => ({\n      id: c._id,\n      qty: c.qty\n    }));\n    console.log(payload);\n    try {\n      const response = await apiOperations.apiPost(\"/orders\", payload, {\n        headers: {\n          accept: \"/*/\",\n          uid: user._id\n        }\n      });\n      console.log(response);\n      setOrdered(true);\n    } catch (error) {\n      console.log(\"ERROR: \" + error);\n    }\n  };\n  const doContinue = () => {\n    setSum(0);\n    setCart([]);\n    setOrdered(false);\n  };\n  const onMyOrders = () => {\n    navigate(\"/myorders\");\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!ordered && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-end\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col col-2 text-end\",\n          style: {\n            marginBottom: \"1em\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onMyOrders,\n            className: \"btn btn-sm btn-warning\",\n            children: \"Your Orders\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }, this), !loading && response.length > 0 && !ordered && /*#__PURE__*/_jsxDEV(Row, {\n      md: 2,\n      style: {\n        rowGap: \"1rem\"\n      },\n      children: response.map(p => {\n        return /*#__PURE__*/_jsxDEV(ProductItem, {\n          product: p,\n          onAddCart: addToCart\n        }, p._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 33\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }, this), !loading && !ordered && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-center\",\n      style: {\n        marginTop: \"1rem\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col col-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: [\"Total: \", sum]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          disabled: sum > 0 ? false : true,\n          onClick: doOrder,\n          className: \"btn btn-sm btn-warning\",\n          children: \"Place Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this), ordered && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col col-6 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Order Placed Successfully\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: doContinue,\n              className: \"btn btn-sm btn-warning\",\n              children: \"Continue Shopping\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n}\n_s(Products, \"Jb8IYPRvf1aH4llYHxZTZHgXdfU=\", false, function () {\n  return [useNavigate, useAuth, apiHooks.useAxiosGet];\n});\n_c = Products;\nvar _c;\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"names":["useState","useNavigate","useAuth","apiHooks","apiOperations","ProductItem","Row","jsxDEV","_jsxDEV","Fragment","_Fragment","Products","_s","cart","setCart","sum","setSum","ordered","setOrdered","navigate","user","dirty","setDirty","Date","response","error","loading","useAxiosGet","headers","accept","console","log","addToCart","id","count","newCart","filter","c","_id","p","qty","total","map","price","doOrder","payload","apiPost","uid","doContinue","onMyOrders","children","className","style","marginBottom","type","onClick","fileName","_jsxFileName","lineNumber","columnNumber","length","md","rowGap","product","onAddCart","marginTop","disabled","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Downloads/FinalMernProject-SHOPLY-main/FinalMernProject-SHOPLY-main/react/src/shopping/products.jsx"],"sourcesContent":["import { useState } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport { useAuth } from \"../auth/auth_helpers\"\nimport { apiHooks } from \"../apis/hooks\"\nimport { apiOperations } from \"../apis/operations\"\nimport ProductItem from \"./product-item\"\nimport { Row } from \"react-bootstrap\"\n\nexport default function Products() {\n    let [cart, setCart] = useState([])\n    let [sum, setSum] = useState(0)\n    let [ordered, setOrdered] = useState(false)\n\n    const navigate = useNavigate()\n    const {user} = useAuth()\n\n    const [dirty, setDirty] = useState(new Date())\n\n    const { response, error, loading } = apiHooks.useAxiosGet('/products', {headers: {accept: '*/*'}}, dirty)\n    \n    console.log(error)\n    const addToCart = (id, count) => {\n        const newCart = [...cart.filter(c => c._id !== id), {...response.filter(p => p._id === id)[0], qty: count}]\n\n        setCart(newCart)\n\n        let total = 0\n        newCart.map(c => total += (c.price * c.qty))\n        setSum(total)\n    }\n\n    const doOrder = async ()  => {\n        const payload = cart.map(c => ({id: c._id, qty: c.qty}))\n        console.log(payload)\n\n        try {\n            const response = await apiOperations.apiPost(\"/orders\", payload, {headers: {accept: \"/*/\", uid: user._id}})\n            console.log(response)\n            setOrdered(true)\n        } catch(error) {\n            console.log(\"ERROR: \" + error)\n        }\n    }\n\n    const doContinue = () => {\n        setSum(0)\n        setCart([])\n        setOrdered(false)\n    }\n\n    const onMyOrders = () => {\n        navigate(\"/myorders\")\n    }\n\n    return (\n        <>\n            {!ordered && \n                <div className=\"container\">\n                    <div className=\"row justify-content-end\">\n                        <div className=\"col col-2 text-end\" style={{marginBottom: \"1em\"}}>\n                            <button type=\"button\" onClick={onMyOrders} className=\"btn btn-sm btn-warning\">Your Orders</button>\n                        </div>\n                    </div>\n                </div>\n            }\n            {loading && <div>Loading...</div>}\n\n            {!loading && response.length > 0 && !ordered &&\n                <Row md={2} style={{rowGap: \"1rem\"}}>\n                    {response.map(p => {\n                        return (<ProductItem product={p} onAddCart={addToCart} key={p._id} />)\n                    })}\n                </Row>\n                    \n                \n            }\n\n            {!loading && !ordered && \n                <div className=\"row justify-content-center\" style={{marginTop: \"1rem\"}}>\n                    <div className=\"col col-2\">\n                        <b>Total: {sum}</b>&nbsp;\n                        <button type=\"button\" disabled={sum > 0 ? false : true} onClick={doOrder} className=\"btn btn-sm btn-warning\">Place Order</button>\n                    </div>\n\n                </div>\n            }\n\n            {ordered && \n                <div className=\"container\">\n                    <div className=\"row justify-content-center\">\n                        <div className=\"col col-6 text-center\">\n                            <h1>Order Placed Successfully</h1>\n                            <div className=\"col text-center\">\n                                <button type=\"button\" onClick={doContinue} className=\"btn btn-sm btn-warning\">Continue Shopping</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            }\n        \n        </>\n    )\n\n\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}